<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>AEGIS ARENA | SECURE CORE</title>
    <link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css">
    <style>
        body { background: #05070a; color: #00f3ff; font-family: 'Courier New', monospace; display: flex; flex-direction: column; align-items: center; padding-top: 50px; }
        #board { width: 450px; border: 2px solid #00f3ff; box-shadow: 0 0 20px rgba(0,243,255,0.3); }
        .status-box { margin-top: 20px; padding: 15px; background: #111; border-left: 5px solid #ff003c; width: 420px; }
    </style>
</head>
<body>

    <h1>AEGIS SYSTEM [ENCRYPTED]</h1>
    <div id="board"></div>
    
    <div class="status-box">
        <div id="status">STATUS: SYSTEM READY</div>
        <div id="depth-display">DEPTH: 0/24</div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
    
    <script src="aegis-core.js"></script>

    <script>
        var board = null;
        var game = new Chess();

        function onDrop(source, target) {
            var move = game.move({ from: source, to: target, promotion: 'q' });
            if (move === null) return 'snapback';
            
            $('#status').text("STATUS: AEGIS THINKING...");
            // Gọi hàm từ file AI bí mật
            askAegis(game.fen());
        }

        // Lắng nghe phản hồi từ Aegis Core
        window.addEventListener("message", function(event) {
            if (event.data.type === "AEGIS_MOVE") {
                game.move(event.data.move);
                board.position(game.fen());
                $('#status').text("STATUS: YOUR TURN");
            }
            if (event.data.type === "AEGIS_DEPTH") {
                $('#depth-display').text("DEPTH: " + event.data.depth + "/24");
            }
        });

        board = Chessboard('board', { draggable: true, position: 'start', onDrop: onDrop });
    </script>
</body>
</html>
